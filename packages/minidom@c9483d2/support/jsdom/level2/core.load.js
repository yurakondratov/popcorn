montageDefine("c9483d2","support/jsdom/level2/core",{dependencies:["../level1/core"],factory:function(e,t,n){var o=e("../level1/core").dom.level1.core;o=Object.create(o);var i=(o.INVALID_STATE_ERR=11,o.SYNTAX_ERR=12,o.INVALID_MODIFICATION_ERR=13,o.NAMESPACE_ERR=14),r=(o.INVALID_ACCESS_ERR=15,{validate:function(e,t){if(!e)throw new o.DOMException(o.INVALID_CHARACTER_ERR,"namespace is undefined");if(null!==e.match(/[^0-9a-z\.:\-_]/i))throw new o.DOMException(o.INVALID_CHARACTER_ERR,e);var n=!1,r=e.split(":");if("xmlns"===e&&"http://www.w3.org/2000/xmlns/"!==t?n="localName is 'xmlns' but the namespaceURI is invalid":"xml"===e&&"http://www.w3.org/XML/1998/namespace"!==t?n="localName is 'xml' but the namespaceURI is invalid":":"===e[e.length-1]?n="Namespace seperator found with no localName":":"===e[0]?n="Namespace seperator found, without a prefix":r.length>2&&(n="Too many namespace seperators"),n)throw new o.DOMException(i,n+" ("+e+"@"+t+")")}});o.exceptionMessages.NAMESPACE_ERR="Invalid namespace",o.DOMImplementation.prototype.createDocumentType=function(e,t,n){r.validate(e);var i=new o.DocumentType(null,e);return i._publicId=t?t:"",i._systemId=n?n:"",i},o.DOMImplementation.prototype.createDocument=function(e,t,n){if((t||e)&&r.validate(t,e),n&&null!==n._ownerDocument)throw new o.DOMException(o.WRONG_DOCUMENT_ERR);if(t&&t.indexOf(":")>-1&&!e)throw new o.DOMException(i);var a=new o.Document;if(n?(a.doctype=n,n._ownerDocument=a,a.appendChild(n)):a.doctype=null,n&&!n.entities&&(n.entities=new o.EntityNodeMap),a._ownerDocument=a,t){var p=a.createElementNS(e,t);a.appendChild(p)}return a},o.Node.prototype.__defineGetter__("ownerDocument",function(){return this._ownerDocument||null}),o.Node.prototype.isSupported=function(e,t){return this._ownerDocument.implementation.hasFeature(e,t)},o.Node.prototype._namespaceURI=null,o.Node.prototype.__defineGetter__("namespaceURI",function(){return this._namespaceURI||null}),o.Node.prototype.__defineSetter__("namespaceURI",function(e){this._namespaceURI=e}),o.Node.prototype.__defineGetter__("prefix",function(){return this._prefix||null}),o.Node.prototype.__defineSetter__("prefix",function(e){if(this.readonly)throw new o.DOMException(o.NO_MODIFICATION_ALLOWED_ERR);if(r.validate(e,this._namespaceURI),this._created&&!this._namespaceURI||"xmlns"===this._prefix||!this._prefix&&this._created)throw new o.DOMException(o.NAMESPACE_ERR);this._localName&&(this._nodeName=e+":"+this._localName),this._prefix=e}),o.Node.prototype.__defineGetter__("localName",function(){return this._localName||null}),o.Node.prototype.hasAttributes=function(){return this.nodeType===this.ELEMENT_NODE&&this._attributes&&this._attributes.length>0},o.NamedNodeMap.prototype.getNamedItemNS=function(e,t){return this._nsStore[e]&&this._nsStore[e][t]?this._nsStore[e][t]:null},o.AttrNodeMap.prototype.setNamedItemNS=function(e){if(e.nodeType!==this._ownerDocument.ATTRIBUTE_NODE)throw new o.DOMException(o.HIERARCHY_REQUEST_ERR);return o.NamedNodeMap.prototype.setNamedItemNS.call(this,e)};var a=o.AttrNodeMap.prototype.setNamedItem;o.AttrNodeMap.prototype.setNamedItem=function(e){if(e.nodeType!==this._ownerDocument.ATTRIBUTE_NODE)throw new o.DOMException(o.HIERARCHY_REQUEST_ERR);return a.call(this,e)},o.NamedNodeMap.prototype.setNamedItemNS=function(e){if(this._readonly)throw new o.DOMException(o.NO_MODIFICATION_ALLOWED_ERR);var t=this._ownerDocument;if(this._parentNode&&this._parentNode._parentNode&&this._parentNode._parentNode.nodeType===t.ENTITY_NODE)throw new o.DOMException(o.NO_MODIFICATION_ALLOWED_ERR);if(this._ownerDocument!==e.ownerDocument)throw new o.DOMException(o.WRONG_DOCUMENT_ERR);if(e._ownerElement)throw new o.DOMException(o.INUSE_ATTRIBUTE_ERR);if(this._readonly===!0)throw new o.DOMException(o.NO_MODIFICATION_ALLOWED_ERR);this._nsStore[e.namespaceURI]||(this._nsStore[e.namespaceURI]={});if(this._nsStore[e.namespaceURI][e.localName]){this._nsStore[e.namespaceURI][e.localName]}return this._nsStore[e.namespaceURI][e.localName]=e,e._specified=!0,e._ownerDocument=this._ownerDocument,this.setNamedItem(e)},o.NamedNodeMap.prototype.removeNamedItemNS=function(e,t){if(this.readonly)throw new o.DOMException(o.NO_MODIFICATION_ALLOWED_ERR);var n,i,r,a,p=this._parentNode,_=null;if(this._parentNode&&this._parentNode._parentNode&&this._parentNode._parentNode.nodeType===this._ownerDocument.ENTITY_NODE)throw new o.DOMException(o.NO_MODIFICATION_ALLOWED_ERR);if(this._nsStore[e]&&this._nsStore[e][t]&&(_=this._nsStore[e][t],this.removeNamedItem(_.qualifiedName),delete this._nsStore[e][t]),!_)throw new o.DOMException(o.NOT_FOUND_ERR);return p.ownerDocument.doctype&&p.ownerDocument.doctype._attributes&&(n=p.ownerDocument.doctype._attributes,r=n.getNamedItemNS(p._namespaceURI,p._localName)),r&&(a=r._attributes.getNamedItemNS(e,t),a&&(i=a.cloneNode(!0),i._created=!1,i._namespaceURI=_._namespaceURI,i._nodeName=_.name,i._localName=_._localName,i._prefix=_._prefix,this.setNamedItemNS(i),i._created=!0,i._specified=!1)),_},o.Attr.prototype.__defineGetter__("ownerElement",function(){return this._ownerElement||null}),o.Node.prototype._prefix=!1,o.Node.prototype.__defineSetter__("qualifiedName",function(e){r.validate(e,this._namespaceURI),e=e||"",this._localName=e.split(":")[1]||null,this.prefix=e.split(":")[0]||null,this._nodeName=e}),o.Node.prototype.__defineGetter__("qualifiedName",function(){return this._nodeName}),o.NamedNodeMap.prototype._map=function(e){var t,n=[],o=this.length,i=0;for(i;i<o;i++)t=this.item(i),e&&e(t)&&n.push(t);return n},o.Element.prototype.getAttributeNS=function(e,t){var n=this._attributes.getNamedItemNS(e,t);return n&&n.nodeValue},o.Element.prototype.setAttributeNS=function(e,t,n){var i,a=t.split(":"),p=a.pop(),_=a.pop()||null;if(r.validate(t,e),"xml"===t.split(":").shift()&&"http://www.w3.org/XML/1998/namespace"!==e)throw new o.DOMException(o.NAMESPACE_ERR);if("xmlns"===_&&"http://www.w3.org/2000/xmlns/"!==e)throw new o.DOMException(o.NAMESPACE_ERR);if(t.split(":").length>1&&!e)throw new o.DOMException(o.NAMESPACE_ERR);i=this._attributes.getNamedItemNS(e,p),i||(i=this.ownerDocument.createAttributeNS(e,t,n),this._attributes.setNamedItemNS(i)),i._namespaceURI=e,i._prefix=_,i._created=!0,i.value=n,i._localName=p},o.Element.prototype.removeAttributeNS=function(e,t){if(this.readonly)throw new o.DOMException(o.NO_MODIFICATION_ALLOWED_ERR);var n,i,r,a,i,t,p=this.ownerDocument;p.doctype&&p.doctype._attributes&&(n=p.doctype._attributes,r=n.getNamedItemNS(e,this.localName)),r&&(a=r.getAttributeNodeNS(e,t)),this._attributes.removeNamedItemNS(e,t),a&&(this.setAttributeNS(a.namespaceURI,a.name,a.value),t=a.name.split(":").pop(),i=this.getAttributeNS(a.namespaceURI,t),i._specified=!1)},o.Element.prototype.getAttributeNodeNS=function(e,t){return this._attributes.getNamedItemNS(e,t)},o.Element.prototype._created=!1,o.Element.prototype.setAttributeNodeNS=function(e){if(e.ownerElement)throw new o.DOMException(o.INUSE_ATTRIBUTE_ERR);var t=null;try{t=this._attributes.removeNamedItemNS(e.namespaceURI,e.localName)}catch(n){}return this._attributes.setNamedItemNS(e)||t},o.Element.prototype.getElementsByTagNameNS=function(e,t){function n(n){n.nodeType&&n.nodeType===this.ENTITY_REFERENCE_NODE&&(n=n._entity);var o=n.localName===t,i=n.namespaceURI===e;return!(!o&&"*"!==t||!i&&"*"!==e||n.nodeType!==n.ELEMENT_NODE)}return new o.NodeList(this.ownerDocument||this,o.mapper(this,n))},o.Element.prototype.hasAttribute=function(e){return!!this._attributes&&this._attributes.exists(e)},o.Element.prototype.hasAttributeNS=function(e,t){return!!this._attributes.getNamedItemNS(e,t)||!!this.hasAttribute(t)},o.DocumentType.prototype.__defineGetter__("publicId",function(){return this._publicId||""}),o.DocumentType.prototype.__defineGetter__("systemId",function(){return this._systemId||""}),o.DocumentType.prototype.__defineGetter__("internalSubset",function(){return this._internalSubset||null}),o.Document.prototype.importNode=function(e,t){function n(e){var t,n;if(e._ownerDocument=i,e.id&&(i._ids||(i._ids={}),i._ids[e.id]||(i._ids[e.id]=[]),i._ids[e.id].push(e)),e._attributes){e._attributes._ownerDocument=i;for(var o=0,r=e._attributes.length;o<r;o++)t=e._attributes.item(o),t._ownerDocument=i,t._specified=!0}a&&(n=a.getNamedItemNS(e._namespaceURI,e._localName),n&&n._attributes._map(function(t){if(!e.hasAttributeNS(t.namespaceURL,t.localName)){var n=t.cloneNode(!0);n._namespaceURI=t._namespaceURI,n._prefix=t._prefix,n._localName=t._localName,e.setAttributeNodeNS(n),n._specified=!1}}))}if(e&&e.nodeType&&(e.nodeType===this.DOCUMENT_NODE||e.nodeType===this.DOCUMENT_TYPE_NODE))throw new o.DOMException(o.NOT_SUPPORTED_ERR);var i=this,r=e.cloneNode(t,function(e,t){t._namespaceURI=e._namespaceURI,t._nodeName=e._nodeName,t._localName=e._localName}),a=!1;return this.doctype&&this.doctype._attributes&&(a=this.doctype._attributes),t?o.visitTree(r,n):n(r),r.nodeType==r.ATTRIBUTE_NODE&&(r._specified=!0),r},o.Document.prototype.createElementNS=function(e,t){var n,i,a=t.split(":");if(a.length>1&&!e)throw new o.DOMException(o.NAMESPACE_ERR);return r.validate(t,e),n=this.createElement(t),n._created=!1,n._namespaceURI=e,n._nodeName=t,n._localName=a.pop(),a.length>0&&(i=a.pop(),n.prefix=i),n._created=!0,n},o.Document.prototype.createAttributeNS=function(e,t){var n,i=t.split(":");if(i.length>1&&!e)throw new o.DOMException(o.NAMESPACE_ERR,"Prefix specified without namespaceURI ("+t+")");return r.validate(t,e),n=this.createAttribute(t),n.namespaceURI=e,n.qualifiedName=t,n._localName=i.pop(),n._prefix=i.length>0?i.pop():null,n},o.Document.prototype.getElementsByTagNameNS=function(e,t){return o.Element.prototype.getElementsByTagNameNS.call(this,e,t)},o.Element.prototype.__defineSetter__("id",function(e){this.setAttribute("id",e)}),o.Element.prototype.__defineGetter__("id",function(){return this.getAttribute("id")}),o.Document.prototype.getElementById=function(e){return this._ids&&this._ids[e]&&this._ids[e].length>0?this._ids[e][0]:null},t.dom={level2:{core:o}}}});