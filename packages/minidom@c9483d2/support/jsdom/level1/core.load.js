montageDefine("c9483d2","support/jsdom/level1/core",{dependencies:[],factory:function(t,e,n){function o(t){var e=-1;for(var n in t){var o=+n;!isNaN(o)&&o>e&&(e=o)}return e+1}var i=function(t,e,n){t&&e&&n&&(n._ids[t]||(n._ids[t]=[]),n._ids[t].push(e))},r=function(t,e,n){var o,i;if(t&&e&&n&&n._ids&&n._ids[t]){for(o=n._ids[t],i=0;i<o.length;i++)o[i]===e&&(o.splice(i,1),i--);0===o.length&&delete n._ids[t]}},s={mapper:function(t,e,n){return function(){return s.mapDOMNodes(t,n!==!1,e)}},mapDOMNodes:function(t,e,n){function o(t,e){return Array.prototype.reduce.call(t.childNodes,i,e)}function i(t,i){return n(i)&&t.push(i),e&&i._childNodes&&o(i,t),t}return o(t,[])},visitTree:function(t,e){function n(t){if(t&&(e(t),t._childNodes)){var o=0,i=t._childNodes,r=i.length;for(o;o<r;o++)n(i[o])}}n(t)},markTreeReadonly:function(t){function e(t){if(t._readonly=!0,t.attributes){var n=t.attributes,o=n.length,i=0;for(n._readonly=!0,i;i<o;i++)s.visitTree(n[i],e)}}s.visitTree(t,e)}},c=s.INDEX_SIZE_ERR=1,a=s.DOMSTRING_SIZE_ERR=2,h=s.HIERARCHY_REQUEST_ERR=3,u=s.WRONG_DOCUMENT_ERR=4,_=s.INVALID_CHARACTER_ERR=5,d=s.NO_DATA_ALLOWED_ERR=6,l=s.NO_MODIFICATION_ALLOWED_ERR=7,p=s.NOT_FOUND_ERR=8,f=s.NOT_SUPPORTED_ERR=9,N=s.INUSE_ATTRIBUTE_ERR=10,m=1,E=2,O=3,b=4,y=5,D=6,g=7,w=8,j=9,T=10,v=11,M=12,R=s.exceptionMessages={};R[c]="Index size error",R[a]="DOMString size error",R[h]="Hierarchy request error",R[u]="Wrong document",R[_]="Invalid character",R[d]="No data allowed",R[l]="No modification allowed",R[p]="Not found",R[f]="Not supported",R[N]="Attribute in use",s.DOMException=function(t,e){this.code=t,Error.call(this,s.exceptionMessages[t]),this.message=s.exceptionMessages[t],e&&(this.message=this.message+": "+e),Error.captureStackTrace&&Error.captureStackTrace(this,s.DOMException)},s.DOMException.INDEX_SIZE_ERR=c,s.DOMException.DOMSTRING_SIZE_ERR=a,s.DOMException.HIERARCHY_REQUEST_ERR=h,s.DOMException.WRONG_DOCUMENT_ERR=u,s.DOMException.INVALID_CHARACTER_ERR=_,s.DOMException.NO_DATA_ALLOWED_ERR=d,s.DOMException.NO_MODIFICATION_ALLOWED_ERR=l,s.DOMException.NOT_FOUND_ERR=p,s.DOMException.NOT_SUPPORTED_ERR=f,s.DOMException.INUSE_ATTRIBUTE_ERR=N,s.DOMException.prototype={INDEX_SIZE_ERR:c,DOMSTRING_SIZE_ERR:a,HIERARCHY_REQUEST_ERR:h,WRONG_DOCUMENT_ERR:u,INVALID_CHARACTER_ERR:_,NO_DATA_ALLOWED_ERR:d,NO_MODIFICATION_ALLOWED_ERR:l,NOT_FOUND_ERR:p,NOT_SUPPORTED_ERR:f,INUSE_ATTRIBUTE_ERR:N},s.DOMException.prototype.__proto__=Error.prototype,s.NodeList=function(t,e){e?(Object.defineProperties(this,{_element:{value:t},_query:{value:e},_snapshot:{writable:!0},_length:{value:0,writable:!0},_version:{value:-1,writable:!0}}),this._update()):(Array.isArray(t)&&Array.prototype.push.apply(this,t),Object.defineProperties(this,{_length:{value:t?t.length:0,writable:!0}}))},s.NodeList.prototype={_update:function(){if(this._element){if(this._version<this._element._version){var t=this._snapshot=this._query();this._resetTo(t),this._version=this._element._version}}else this._length=o(this)},_resetTo:function(t){for(var e=o(this),n=0;n<e;++n)delete this[n];for(var i=0;i<t.length;++i)this[i]=t[i];this._length=t.length},_toArray:function(){return this._element?(this._update(),this._snapshot):Array.prototype.slice.call(this)},get length(){return this._update(),this._length||0},item:function(t){return this._update(),this[t]||null},toString:function(){return"[ jsdom NodeList ]: contains "+this.length+" items"}},Object.defineProperty(s.NodeList.prototype,"constructor",{value:s.NodeList,writable:!0,configurable:!0}),s.DOMImplementation=function(t,e){if(this._ownerDocument=t,this._features={},e)for(var n in e)e.hasOwnProperty(n)&&this.addFeature(n.toLowerCase(),e[n])},s.DOMImplementation.prototype={get ownerDocument(){return this._ownerDocument},removeFeature:function(t,e){if(t=t.toLowerCase(),this._features[t])if(e){var n=0,o=this._features[t],i=o.length;for(n;n<i;n++)if(o[n]===e)return void o.splice(n,1)}else delete this._features[t]},addFeature:function(t,e){t=t.toLowerCase(),e&&(this._features[t]||(this._features[t]=[]),e instanceof Array?Array.prototype.push.apply(this._features[t],e):this._features[t].push(e))},hasFeature:function(t,e){t=t?t.toLowerCase():"";var n=!!this._features[t]&&this._features[t];if(!e&&n.length&&n.length>0)return!0;if("string"==typeof n)return n===e;if(n.indexOf&&n.length>0){for(var o=0;o<n.length;o++){var i=n[o]instanceof RegExp?n[o].test(e):n[o]===e;if(i)return!0}return!1}return!1}};var I=function(t,e,n){if(t.attributes){var o,i,r,s=t.attributes,c=s.length;for(o=0;o<c;o++)if(i=s[o],i.specified){if(i.namespaceURI){e.setAttributeNS(i.namespaceURI,i.nodeName,i.nodeValue);var a=i.nodeName.split(":").pop();r=e.getAttributeNodeNS(i.namespaceURI,a)}else e.setAttribute(i.nodeName,i.nodeValue),r=e.getAttributeNode(i.nodeName);"function"==typeof n&&n(i,r)}}return e};s.Node=function(t){this._childNodes=new s.NodeList,this._ownerDocument=t,this._attributes=new s.AttrNodeMap(t,this),this._nodeName=null,this._childrenList=null,this._version=0,this._nodeValue=null,this._parentNode=null,this._nodeName=null,this._readonly=!1},s.Node.ELEMENT_NODE=m,s.Node.ATTRIBUTE_NODE=E,s.Node.TEXT_NODE=O,s.Node.CDATA_SECTION_NODE=b,s.Node.ENTITY_REFERENCE_NODE=y,s.Node.ENTITY_NODE=D,s.Node.PROCESSING_INSTRUCTION_NODE=g,s.Node.COMMENT_NODE=w,s.Node.DOCUMENT_NODE=j,s.Node.DOCUMENT_TYPE_NODE=T,s.Node.DOCUMENT_FRAGMENT_NODE=v,s.Node.NOTATION_NODE=M,s.Node.prototype={ELEMENT_NODE:m,ATTRIBUTE_NODE:E,TEXT_NODE:O,CDATA_SECTION_NODE:b,ENTITY_REFERENCE_NODE:y,ENTITY_NODE:D,PROCESSING_INSTRUCTION_NODE:g,COMMENT_NODE:w,DOCUMENT_NODE:j,DOCUMENT_TYPE_NODE:T,DOCUMENT_FRAGMENT_NODE:v,NOTATION_NODE:M,get children(){if(!this._childrenList){var t=this;this._childrenList=new s.NodeList(this,function(){return Array.prototype.filter.call(t._childNodes,function(t){return t.tagName})})}return this._childrenList},get nodeValue(){return this._nodeValue},set nodeValue(t){if(this._readonly===!0)throw new s.DOMException(l,"Attempting to modify a read-only node");this._nodeValue=t},get parentNode(){return this._parentNode},get nodeName(){var t=this._nodeName||this._tagName;return this.nodeType===m&&this._ownerDocument&&this._ownerDocument._doctype&&this._ownerDocument._doctype.name.toLowerCase().indexOf("html")!==-1?t.toUpperCase():t},set nodeName(t){throw new s.DOMException},get attributes(){return this._attributes},get firstChild(){return this._childNodes.length>0?this._childNodes[0]:null},set firstChild(t){throw new s.DOMException},get ownerDocument(){return this._ownerDocument},get readonly(){return this._readonly},get lastChild(){var t=this._childNodes.length;return t>0?this._childNodes[t-1]:null},set lastChild(t){throw new s.DOMException},get childNodes(){return this._childNodes},set childNodes(t){throw new s.DOMException},_indexOf:function(t){if(!this._childNodes||!this._childNodes.length)return-1;for(var e,n=0,o=this._childNodes;(e=o[n])&&e!=t;)n++;return e==t?n:-1},get nextSibling(){if(!this._parentNode||!this._parentNode._indexOf)return null;var t=this._parentNode._indexOf(this);return t==-1||t+1>=this._parentNode._childNodes.length?null:this._parentNode._childNodes[t+1]||null},set nextSibling(t){throw new s.DOMException},get previousSibling(){if(!this._parentNode||!this._parentNode._indexOf)return null;var t=this._parentNode._indexOf(this);return t==-1||t-1<0?null:this._parentNode._childNodes[t-1]||null},set previousSibling(t){throw new s.DOMException},insertBefore:function(t,e){if(this._readonly===!0)throw new s.DOMException(l,"Attempting to modify a read-only node");if(t._ownerDocument||(t._ownerDocument=this._ownerDocument),t._ownerDocument!==this._ownerDocument)throw new s.DOMException(u);if(t.nodeType&&t.nodeType===E)throw new s.DOMException(h);var n=this;do if(n===t)throw new s.DOMException(h);while(n=n._parentNode);if(t.nodeType===v)for(var o;t._childNodes.length>0;)o=t.removeChild(t.firstChild),this.insertBefore(o,e);else{if(t===e)return t;if(t._parentNode&&t._parentNode.removeChild(t),null==e)var i=this._childNodes.length;else{var i=this._indexOf(e);if(i==-1)throw new s.DOMException(p)}Array.prototype.splice.call(this._childNodes,i,0,t),t._parentNode=this,this._attached&&t._attach&&t._attach(),this._modified()}return t},_modified:function(){this._version++,this._ownerDocument&&this._ownerDocument._version++,this._childrenList&&this._childrenList._update()},_attrModified:function(t,e,n){if("id"==t&&this._attached){var o=this._ownerDocument;r(n,this,o),i(e,this,o)}if(t.length>2&&"o"==t[0]&&"n"==t[1])if(e){var s=this,c="undefined"!=typeof s.run?s:s._ownerDocument.parentWindow;s[t]=function(t){c.__tempContextForInlineEventHandler=s,c.__tempEvent=t,c.run("if ((function (event) {"+e+"}).call(window.__tempContextForInlineEventHandler, window.__tempEvent) === false) {window.__tempEvent.preventDefault()}"),delete c.__tempContextForInlineEventHandler,delete c.__tempEvent}}else this[t]=null},replaceChild:function(t,e){return this.insertBefore(t,e),this.removeChild(e)},_attach:function(){this._attached=!0,this.id&&i(this.id,this,this._ownerDocument);for(var t=0;t<this._childNodes.length;t++)this._childNodes[t]._attach&&this._childNodes[t]._attach()},_detach:function(){var t;this._attached=!1,this.id&&r(this.id,this,this._ownerDocument);for(var t=0;t<this._childNodes.length;t++)this._childNodes[t]._detach()},removeChild:function(t){if(this._readonly===!0)throw new s.DOMException(l);var e=this._indexOf(t);if(e==-1)throw new s.DOMException(p);return Array.prototype.splice.call(this._childNodes,e,1),t._parentNode=null,this._modified(),t._detach(),t},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this._childNodes.length>0},cloneNode:function(t,e){var n=null;switch(this.nodeType){case this.ELEMENT_NODE:n=I(this,this._ownerDocument.createElement(this.tagName),e);break;case this.TEXT_NODE:n=I(this,this._ownerDocument.createTextNode(this.tagName)),n.nodeValue=this.nodeValue;break;case this.CDATA_SECTION_NODE:n=this._ownerDocument.createCDATASection(this.tagName),n.nodeValue=this.nodeValue;break;case this.ENTITY_REFERENCE_NODE:var o=this._entity?this._entity.name:this._entityName,i=this._ownerDocument.createEntityReference(o);n=I(this,i),n.nodeValue=this.nodeValue;break;case this.ATTRIBUTE_NODE:n=this._ownerDocument.createAttribute(this.name);break;case this.ENTITY_NODE:var r=this._ownerDocument.createEntityNode(this.name);n=I(this,r),n.nodeValue=this.nodeValue,n._publicId=this._publicId,n._systemId=this._systemId,n._notationName=this.notationName;break;case this.PROCESSING_INSTRUCTION_NODE:var c=this._ownerDocument.createProcessingInstruction(this._target,this._data);n=I(this,c),n.nodeValue=this.nodeValue;break;case this.COMMENT_NODE:n=this._ownerDocument.createComment(this.tagName),n.nodeValue=this.nodeValue;break;case this.DOCUMENT_NODE:n=I(this,new s.Document);break;case this.DOCUMENT_TYPE_NODE:n=I(this,new s.DocumentType),n.nodeValue=this.nodeValue;break;case this.DOCUMENT_FRAGMENT_NODE:n=this._ownerDocument.createDocumentFragment();break;case this.NOTATION_NODE:n=this._ownerDocument.createNotationNode(this._name,this._publicId,this._systemId),n=I(this,n),n.nodeValue=this.nodeValue;break;default:throw new s.DOMException(p)}if("function"==typeof e&&e(this,n),t||this.nodeType===E)for(var a=null,h=0,u=this._childNodes.length;h<u;h++)if(a=this._childNodes[h].cloneNode(!0),a.nodeType===E)n.setAttributeNode(a);else{var _=n._readonly;n._readonly=!1,n.appendChild(a),n._readonly=_}return n},normalize:function(){var t,e,n,o;if(this._attributes&&this._attributes.length)for(o=0;o<this._attributes.length;o++)this._attributes.item(o)&&(n=this._attributes.item(o).normalize());for(o=0;o<this._childNodes.length;o++)e=this._childNodes[o],e.normalize&&e.normalize(),""!==e.nodeValue?o>0&&(t=this._childNodes[o-1],e.nodeType===O&&t.nodeType===O&&(t.appendData(e.nodeValue),this.removeChild(e),o--)):(this.removeChild(e),o--)},toString:function(){var t="";if(this.id&&(t="#"+this.id),this.className)for(var e=this.className.split(/\s+/),n=0,o=e.length;n<o;n++)t+="."+e[n];return"[ "+this.tagName+t+" ]"},raise:function(t,e,n){var o=t+": "+e;if(n&&(n.exception?o=n.exception.stack:o+=" - More:\n"+n),"error"===t){this.errors||(this.errors=[]);var i={type:t,message:e||"No message",data:n||null};this.errors.push(i),this._ownerDocument&&this._ownerDocument.raise&&this!==this._ownerDocument&&this._ownerDocument.raise(t,e,n)}}},s.NamedNodeMap=function(t){this._nodes=Object.create(null),this._nsStore={},this.length=0,this._ownerDocument=t,this._readonly=!1},s.NamedNodeMap.prototype={get readonly(){return this._readonly},get ownerDocument(){this._ownerDocument},exists:function(t){return!(!this._nodes[t]&&null!==this._nodes[t])},getNamedItem:function(t){return this._nodes[t]||null},setNamedItem:function(t){if(this._readonly===!0)throw new s.DOMException(l);if(t&&t._ownerDocument!==this._ownerDocument)throw new s.DOMException(u);if(t&&t._ownerElement)throw new s.DOMException(N);var e=t.name||t.tagName,n=this._nodes[e];return n||(this.length++,n=null),t._specified=!0,this[e]=this._nodes[e]=t,n},removeNamedItem:function(t){if(this._readonly===!0)throw new s.DOMException(l);if(!this._nodes[t])throw new s.DOMException(p);var e=this._nodes[t]||null;return delete this._nodes[t],delete this[t],this.length--,e},item:function(t){var e=0;for(var n in this._nodes){if(e===t&&this._nodes[n])return this._nodes[n];e++}return null}},s.AttrNodeMap=function(t,e){s.NamedNodeMap.call(this,t),this._parentNode=e},s.AttrNodeMap.prototype={get parentNode(){return this._parentNode},setNamedItem:function(t){var e=s.NamedNodeMap.prototype.setNamedItem.call(this,t),n=this._parentNode;return t._ownerElement=n,n._attrModified(t.name,t.value,e&&e.value||null),n._modified(),e},removeNamedItem:function(t){var e=s.NamedNodeMap.prototype.removeNamedItem.call(this,t),n=this._parentNode;e._ownerElement=null,n._attrModified(t),n._modified();var o=this._ownerDocument;if(o&&o._doctype&&"html"!==o._doctype.name.toLowerCase()){var i=!1,r=o._doctype._attributes.getNamedItem(this._parentNode.nodeName);if(r){var i=r.attributes.getNamedItem(t);if(i){var c=o.createAttribute(t);c.value=i.value,c._specified=!1,this._nodes[t]=c,this.length++}}}return e}},s.AttrNodeMap.prototype.__proto__=s.NamedNodeMap.prototype,s.NotationNodeMap=function(t){s.NamedNodeMap.call(this,t),this._readonly=!1;for(var e=1;e<arguments.length;e++)this.setNamedItem(arguments[e]);this._readonly=!0},s.NotationNodeMap.prototype={},s.NotationNodeMap.prototype.__proto__=s.NamedNodeMap.prototype,s.EntityNodeMap=function(t){s.NamedNodeMap.call(this,t),this._readonly=!1;var e=1,n=arguments.length;for(e=1;e<n;e++)this.setNamedItem(arguments[e]);s.markTreeReadonly(this)},s.EntityNodeMap.prototype={},s.EntityNodeMap.prototype.__proto__=s.NamedNodeMap.prototype,s.Element=function(t,e){this._ownerDocument=t,s.Node.call(this,t),this._nodeName=e,this._tagName=e},s.Element.prototype={get nodeValue(){return null},set nodeValue(t){},get tagName(){return this.nodeType===m&&this._ownerDocument&&this._ownerDocument._doctype&&this._ownerDocument._doctype.name.toLowerCase().indexOf("html")!==-1?this.nodeName.toUpperCase():this.nodeName},nodeType:m,get attributes(){for(var t=0;t<this._attributes.length;t++)this._attributes[t]=this._attributes.item(t);return this._attributes},getAttribute:function(t){var e=this._attributes.getNamedItem(t);return e?e.value:null},setAttribute:function(t,e){if(this._ownerDocument){var n=this._ownerDocument.createAttribute(t);n.value=e,this._attributes.setNamedItem(n)}},removeAttribute:function(t){this._attributes.exists(t)&&this._attributes.removeNamedItem(t)},getAttributeNode:function(t){return this._attributes.getNamedItem(t)},setAttributeNode:function(t){var e=this._attributes.getNamedItem(t.name);return e&&(e._ownerElement=null),this._attributes.setNamedItem(t),e&&e.specified?e:null},removeAttributeNode:function(t){var e=this._attributes.getNamedItem(t.name);if(this._attributes&&e===t)return this._attributes.removeNamedItem(t.name),t;throw new s.DOMException(p)},getElementsByTagName:function(t){function e(e){return e=e.nodeType===y?e._entity:e,!(!e.nodeName||e.nodeType!==m)&&("*"===t||e.nodeName.toLowerCase()===t)}return t=t.toLowerCase(),new s.NodeList(this._ownerDocument||this,s.mapper(this,e,!0))}},s.Element.prototype.__proto__=s.Node.prototype,s.DocumentFragment=function(t){s.Node.call(this,t),this._nodeName=this._tagName="#document-fragment"},s.DocumentFragment.prototype={nodeType:v,get nodeValue(){return null},set nodeValue(t){},get attributes(){return null}},s.DocumentFragment.prototype.__proto__=s.Node.prototype,s.ProcessingInstruction=function(t,e,n){this._ownerDocument=t,s.Node.call(this,t),this._nodeName=e,this._tagName=e,this._target=e,this._nodeValue=n},s.ProcessingInstruction.prototype={nodeType:g,get target(){return this._target},set target(t){throw new s.DOMException(1)},get nodeValue(){return this._nodeValue},set nodeValue(t){this._nodeValue=t},get data(){return this._nodeValue},set data(t){throw new s.DOMException(l)},get attributes(){return null}},s.ProcessingInstruction.prototype.__proto__=s.Node.prototype,s.Document=function(t){t?"string"==typeof t&&(t={name:t}):t={},s.Node.call(this,"#document"),this._nodeName=this._tagName="#document",this._contentType=t.contentType||"text/xml",this._doctype=t._doctype,this._implementation=t.implementation||new s.DOMImplementation,this._documentElement=null,this._ids=Object.create(null),this._attached=!0,this._ownerDocument=this,this._readonly=!1};var C=/[^\w:\d_\.-]+/i,x=/[^\w\d_\-&;]+/,A=/[\s"'>\/=\u0000-\u001A]/;s.Document.prototype={nodeType:j,_elementBuilders:{},_defaultElementBuilder:function(t,e){return new s.Element(t,e)},get contentType(){return this._contentType},get doctype(){return this._doctype||null},set doctype(t){this._doctype=t},get documentElement(){if(this._documentElement)return this._documentElement;var t=this._childNodes,e=this._childNodes.length,n=0;for(n;n<e;n++)if(t[n].nodeType===m)return this._documentElement=t[n],t[n];return null},get implementation(){return this._implementation},set implementation(t){this._implementation=t},get nodeName(){return"#document"},get tagName(){return null},get nodeValue(){return null},set nodeValue(t){},get attributes(){return null},get ownerDocument(){return null},get readonly(){return this._readonly},_createElementNoTagNameValidation:function(t){var e=t.toLowerCase(),n=(this._elementBuilders[e]||this._defaultElementBuilder)(this,t);if(this._doctype&&this._doctype._attributes&&"html"!==this._doctype.name.toLowerCase()){var o=this._doctype._attributes.getNamedItem(t);if(o&&o._childNodes)for(var i,r,s=o.attributes,c=s.length,a=0;a<c;a++)r=s.item(a),r&&(i=this.createAttribute(r.name),i.value=r.value,n.setAttributeNode(i),i._specified=!1)}return n._created=!0,n},createElement:function(t){t=String(t);var e=[];if(0===t.length||(e=t.match(C)))throw new s.DOMException(_,"Invalid character in tag name: "+e.pop());return this._createElementNoTagNameValidation(t)},createDocumentFragment:function(){return new s.DocumentFragment(this)},createTextNode:function(t){return new s.Text(this,t)},createComment:function(t){return new s.Comment(this,t)},createCDATASection:function(t){if(this._doctype&&"html"===this._doctype.name)throw new s.DOMException(f);return new s.CDATASection(this,t)},createProcessingInstruction:function(t,e){if(this._doctype&&"html"===this._doctype.name)throw new s.DOMException(f);if(t.match(C)||!t||!t.length)throw new s.DOMException(_);return new s.ProcessingInstruction(this,t,e)},createAttribute:function(t){if(!t||!t.length||t.match(A))throw new s.DOMException(_,"attribute name: "+t);return new s.Attr(this,t,(!1))},createEntityReference:function(t){if(this._doctype&&"html"===this._doctype.name)throw new s.DOMException(f);if(t=t.replace(/[&;]/g,""),!t||!t.length)throw new s.DOMException(_);if(t.match(C))throw new s.DOMException(_);var e;e=this._doctype&&this._doctype.entities?this._doctype.entities.getNamedItem(t):null;var n=new s.EntityReference(this,e);return n._entityName=t,n},createEntityNode:function(t){if(t.match(x)||!t||!t.length)throw new s.DOMException(_);var e=new s.Entity(this,t);e._readonly=!1;for(var n=1;n<arguments.length;n++)e.appendChild(arguments[n]);return s.markTreeReadonly(e),e},createNotationNode:function(t,e,n){if(t.match(x)||!t||!t.length)throw new s.DOMException(_);var o=new s.Notation(this,t,e,n);o._readonly=!1;for(var i=3;i<arguments.length;i++)o.appendChild(arguments[i]);return s.markTreeReadonly(o),o},appendChild:function(t){if(this.documentElement&&t.nodeType==m)throw new s.DOMException(h);return s.Node.prototype.appendChild.call(this,t)},removeChild:function(t){var e=s.Node.prototype.removeChild.call(this,t);return t==this._documentElement&&(this._documentElement=null),e},getElementsByTagName:function(t){function e(e){if(e.nodeType&&e.nodeType===y&&(e=e._entity),e.nodeName&&e.nodeType===m){if("*"===t)return!0;if(e._ownerDocument&&e._ownerDocument._doctype&&e.nodeName.toLowerCase()===t.toLowerCase())return!0;if(e.nodeName.toLowerCase()===t.toLowerCase())return!0}return!1}return new s.NodeList(this.documentElement||this,s.mapper(this,e,!0))}},s.Document.prototype.__proto__=s.Node.prototype,s.CharacterData=function(t,e){s.Node.call(this,t),this._nodeValue=e+""},s.CharacterData.prototype={get data(){return this._nodeValue},set data(t){if(this._readonly===!0)throw new s.DOMException(l);this._nodeValue=t},get length(){return this._nodeValue.length||0},substringData:function(t,e){if(e<0||t<0||t>this._nodeValue.length)throw new s.DOMException(c);return this._nodeValue.length<t+e?this._nodeValue.substring(t):this._nodeValue.substring(t,t+e)},appendData:function(t){if(this._readonly===!0)throw new s.DOMException(l);return this._nodeValue+=t,this._nodeValue},insertData:function(t,e){if(this._readonly===!0)throw new s.DOMException(l);if(t<0||t>this._nodeValue.length)throw new s.DOMException(c);var n=this._nodeValue.substring(0,t),o=this._nodeValue.substring(t);this._nodeValue=n+e+o},deleteData:function(t,e){if(this._readonly===!0)throw new s.DOMException(l);if(t<0||t>this._nodeValue.length||e<0)throw new s.DOMException(c);var n=this._nodeValue.substring(0,t);this._nodeValue=t+e<this._nodeValue.length?n+this._nodeValue.substring(t+e):n},replaceData:function(t,e,n){if(this._readonly===!0)throw new s.DOMException(l);if(e=t+e>this._nodeValue.length?this.nodeValue.length-t:e,t<0||t>this._nodeValue.length||e<0)throw new s.DOMException(c);var o=this._nodeValue.substring(0,t),i=this._nodeValue.substring(t+e);this._nodeValue=o+n+i}},s.CharacterData.prototype.__proto__=s.Node.prototype,s.Attr=function(t,e,n){s.Node.call(this,t),this._nodeValue=n,this._name=e,this._specified=!!n,this._tagName=e,this._nodeName=e},s.Attr.prototype={nodeType:E,get nodeValue(){for(var t="",e=0,n=this._childNodes.length;e<n;e++){var o=this._childNodes[e];t+=o.nodeType===y?Array.prototype.reduce.call(o.childNodes,function(t,e){return t+=e.nodeValue||e},""):o.nodeValue}return t},set nodeValue(t){if(this._readonly)throw new s.DOMException(l);this._childNodes._resetTo([this._ownerDocument.createTextNode(t)]),this._modified(),this._specified=!0;var e=this._nodeValue;this._nodeValue=t,this._ownerElement&&this._ownerElement._attrModified(this._name,t,e)},get name(){return this._name},get specified(){return this._specified},get value(){return this.nodeValue},set value(t){this.nodeValue=t},get parentNode(){return null},get attributes(){return null},insertBefore:function(t,e){if(t.nodeType===b||t.nodeType===m)throw new s.DOMException(h);return s.Node.prototype.insertBefore.call(this,t,e)},appendChild:function(t){if(t.nodeType===b||t.nodeType===m)throw new s.DOMException(h);return s.Node.prototype.appendChild.call(this,t)}},s.Attr.prototype.__proto__=s.Node.prototype,s.Text=function(t,e,n){s.CharacterData.call(this,t,e),this._nodeName="#text",this._readonly=!!n},s.Text.prototype={nodeType:O,get attributes(){return null},splitText:function(t){if(this._readonly)throw new s.DOMException(l);if(t<0||t>this._nodeValue.length)throw new s.DOMException(c);var e=this._nodeValue.substring(t);this._nodeValue=this._nodeValue.substring(0,t);var n=this._ownerDocument.createTextNode(e);return this._parentNode.lastChild===this?this._parentNode.appendChild(n):this._parentNode.insertBefore(n,this.nextSibling),n},toString:function(){return this.nodeName}},s.Text.prototype.__proto__=s.CharacterData.prototype,s.Comment=function(t,e){s.Text.call(this,t,e),this._nodeName="#comment",this._tagName="#comment"},s.Comment.prototype={nodeType:w},s.Comment.prototype.__proto__=s.Text.prototype,s.CDATASection=function(t,e){s.Text.call(this,t,e),this._nodeName="#cdata-section"},s.CDATASection.prototype={nodeType:b},s.CDATASection.prototype.__proto__=s.Text.prototype,s.DocumentType=function(t,e,n,o,i){s.Node.call(this,t),this._name=e,this._tagName=e,this._nodeName=e,this._entities=n||new s.EntityNodeMap(t),this._notations=o||new s.NotationNodeMap(t),s.markTreeReadonly(this._notations),this._attributes=i||new s.AttrNodeMap(t)},s.DocumentType.prototype={nodeType:T,get nodeValue(){return null},set nodeValue(t){},get name(){return this._name},get entities(){return this._entities},get notations(){return this._notations},get attributes(){return null}},s.DocumentType.prototype.__proto__=s.Node.prototype,s.Notation=function(t,e,n,o){s.Node.call(this,t),this._name=e,this._nodeName=e,this._publicId=n||null,this._systemId=o||null,this._nodeValue=null},s.Notation.prototype={nodeType:M,get publicId(){return this._publicId},get systemId(){return this._systemId},get name(){return this._name||this._nodeName},get attributes(){return null},set nodeValue(t){},get nodeValue(){return this._nodeValue}},s.Notation.prototype.__proto__=s.Node.prototype,s.Entity=function(t,e){s.Node.call(this,t),this._name=e,this._nodeName=e,this._tagName=e,this._publicId=null,this._systemId=null,this._notationName=null,this._readonly=!0},s.Entity.prototype={nodeType:D,get nodeValue(){return null},set nodeValue(t){this._readonly===!0},get name(){return this._name},get publicId(){return this._publicId},get systemId(){return this._systemId},set publicId(t){this._publicId=t},set systemId(t){this._systemId=t},set notationName(t){this._notationName=t},get notationName(){return this._notationName},get attributes(){return null}},s.Entity.prototype.__proto__=s.Node.prototype,s.EntityReference=function(t,e){s.Node.call(this,t),this._entity=e,this._nodeName=e?e.name:null,this._readonly=!0},s.EntityReference.prototype={nodeType:y,get nodeValue(){return this._entity?this._entity.nodeValue:null},set nodeValue(t){this._readonly===!0},get attributes(){return null},get nodeName(){return this._entityName},get firstChild(){return this._entity.firstChild||null},get childNodes(){return this._entity.childNodes},get lastChild(){return this._entity.lastChild||null}},s.EntityReference.prototype.__proto__=s.Node.prototype,e.dom={level1:{core:s}}}});